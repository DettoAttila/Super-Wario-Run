export class Sezione {
    constructor(fg_tilemap, map_col, map_row) {
        this.fg_tilemap = fg_tilemap;
        this.map_col = map_col;
        this.map_row = map_row;
    }
}

export const collision_data = { ///"NORMALIZZARLE" TUTTE
    7: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    8: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    9: [{ type: "poly", x: 0, y: 0, points: [[0,16], [16, 0], [16, 16]] }],
    10: [{ type: "slope", x: 0, y: 0, points: [[0,0], [0,16], [16,16]] }],
    12: [{ type: "gem", x: 4, y: 0, width: 8, height: 16 }],
    13: [{ type: "gem", x: 4, y: 0, width: 8, height: 16 }],
    14: [{ type: "gem", x: 4, y: 0, width: 8, height: 16 }],
    15: [{ type: "gem", x: 4, y: 0, width: 8, height: 16 }],
    17: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    18: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    19: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    20: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    21: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    22: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    24: [{ type: "poly", x: 0, y: 0, points: [[0,16], [16,0], [16,16]] }],
    25: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }], //
    26: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }], ///
    27: [{ type: "slope", x: 0, y: 0, points: [[0,0], [0,16], [16,16]] }],
    28: [{ type: "gem", x: 4, y: 0, width: 8, height: 16 }],
    29: [{ type: "gem", x: 4, y: 0, width: 8, height: 16 }],
    30: [{ type: "gem", x: 4, y: 0, width: 8, height: 16 }],
    31: [{ type: "gem", x: 4, y: 0, width: 8, height: 16 }],
    33: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    35: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    36: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    38: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    40: [{ type: "poly", x: 0, y: 0, points: [[0,0], [16,16], [16,0]] }],
    43: [{ type: "poly", x: 0, y: 0, points: [[0,0], [0,16], [16,0]] }],
    45: [{ type: "lava", x: 0, y: 5, width: 16, height: 11 }],
    46: [{ type: "lava", x: 0, y: 5, width: 16, height: 11 }],
    49: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    50: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    51: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    53: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    54: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    57: [{ type: "poly", x: 0, y: 0, points: [[0,0], [16,16], [16,0]] }],
    58: [{ type: "poly", x: 0, y: 0, points: [[0,0], [0,16], [16,0]] }],
    61: [{ type: "lava", x: 0, y: 5, width: 16, height: 11 }],
    62: [{ type: "lava", x: 0, y: 5, width: 16, height: 11 }],
    65: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    66: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    69: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    70: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    72: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    73: [{ type: "block", x: 0, y: 0, width: 16, height: 16 }],
    74: [{ type: "block", x: 0, y: 0, width: 16, height: 16 }],
    75: [{ type: "block", x: 0, y: 0, width: 16, height: 16 }],
    76: [{ type: "block", x: 0, y: 0, width: 16, height: 16 }],
    77: [{ type: "lava", x: 0, y: 5, width: 16, height: 11 }],
    78: [{ type: "lava", x: 0, y: 5, width: 16, height: 11 }],
    81: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    83: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    84: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    86: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    88: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    89: [{ type: "block", x: 0, y: 0, width: 16, height: 16 }],
    90: [{ type: "block", x: 0, y: 0, width: 16, height: 16 }],
    91: [{ type: "block", x: 0, y: 0, width: 16, height: 16 }],
    92: [{ type: "block", x: 0, y: 0, width: 16, height: 16 }],
    93: [{ type: "lava", x: 0, y: 5, width: 16, height: 11 }],
    94: [{ type: "lava", x: 0, y: 5, width: 16, height: 11 }],
    97: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    98: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    99: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    100: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    101: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    102: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    103: [{ type: "poly", x: 0, y: 0, points: [[0,16], [16,16], [16,8]] }],
    104: [{ type: "poly", x: 0, y: 0, points: [[0,16], [16,16], [16,0], [0,8]] }],
    105: [{ type: "slope", x: 0, y: 0, points: [[0,0], [0,16], [16,16], [16,8]] }],
    106: [{ type: "slope", x: 0, y: 0, points: [[0,16], [16,16], [0,8]] }],
    109: [{ type: "lava", x: 0, y: 5, width: 16, height: 11 }],
    110: [{ type: "lava", x: 0, y: 5, width: 16, height: 11 }],
    119: [{ type: "poly", x: 0, y: 0, points: [[0,0], [16,0], [16,8]] }],
    120: [{ type: "poly", x: 0, y: 0, points: [[0,0], [16,0], [16,16], [0,8]] }],
    121: [{ type: "poly", x: 0, y: 0, points: [[0,0], [16,0], [16,8], [0,16]] }],
    122: [{ type: "poly", x: 0, y: 0, points: [[0,0], [16,0], [0,8]] }],
    125: [{ type: "lava", x: 0, y: 5, width: 16, height: 11 }],
    126: [{ type: "lava", x: 0, y: 5, width: 16, height: 11 }],
    134: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    136: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    150: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }],
    152: [{ type: "rect", x: 0, y: 0, width: 16, height: 16 }]
}

let sezione1 = new Sezione([
            //livello 1
            [164, 163, 164, 147, 179, 182, 1073741851, 36, 99, 100, 101, 102, 99, 101, 102, 36, 100, 101, 36, 37, 38, 42, 149, 147, 164, 163, 163, 180, 164, 163,
            180, 179, 180, 146, 195, 43, 1073741835, 1073741836, 115, 116, 117, 118, 115, 117, 118, 0, 116, 117, 0, 0, 41, 3221225499, 193, 149, 147, 163, 164, 163, 163, 179,
            195, 196, 197, 198, 1073741851, 1073741852, 0, 0, 0, 0, 0, 0, 13, 0, 0, 0, 0, 0, 0, 0, 57, 58, 38, 193, 149, 179, 180, 146, 196, 197,
            99, 100, 101, 102, 1073741835, 1073741836, 0, 0, 0, 0, 0, 13, 29, 13, 0, 0, 0, 0, 0, 0, 0, 0, 41, 3221225499, 193, 194, 195, 198, 3221225623, 2147483686,
            115, 116, 117, 118, 0, 0, 0, 0, 0, 0, 0, 0, 13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 58, 101, 102, 99, 101, 122, 123,
            0, 0, 0, 0, 0, 0, 0, 0, 3, 4, 7, 0, 0, 0, 2, 3, 3, 4, 5, 0, 0, 0, 0, 0, 117, 118, 115, 117, 0, 0,
            0, 0, 0, 0, 0, 0, 104, 105, 19, 20, 23, 0, 0, 0, 18, 19, 19, 20, 21, 22, 11, 12, 0, 0, 0, 0, 0, 0, 0, 0,
            3, 4, 5, 6, 104, 105, 26, 3221225507, 131, 2147483783, 39, 40, 0, 0, 34, 3221225507, 130, 131, 132, 2147483783, 27, 28, 0, 0, 0, 13, 13, 0, 0, 3,
            19, 20, 21, 22, 26, 3221225507, 131, 181, 163, 150, 55, 56, 0, 49, 50, 161, 163, 164, 163, 178, 2147483783, 27, 106, 107, 3, 4, 5, 104, 105, 19,
            130, 131, 132, 133, 131, 181, 180, 163, 164, 166, 71, 72, 0, 65, 66, 145, 179, 180, 179, 164, 178, 131, 2147483783, 27, 19, 20, 21, 2147483799, 135, 133],
            //livello 2
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 75, 76, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 91, 92, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
            ], 
        30,
        10);

let sezione2 = new Sezione([
            //livello 1
            [164, 163, 164, 147, 179, 182, 87, 88, 0, 0, 0, 0, 0, 0, 0, 0, 0, 33, 34, 161,
            180, 179, 180, 146, 195, 43, 44, 1073741836, 0, 0, 0, 0, 0, 0, 0, 0, 0, 49, 50, 177,
            195, 196, 197, 198, 1073741851, 1073741852, 0, 1073741836, 0, 0, 0, 0, 0, 0, 0, 0, 0, 65, 66, 193,
            99, 100, 101, 102, 1073741835, 1073741836, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 58, 99,
            115, 116, 117, 118, 1073741836, 1073741836, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 0, 0, 115,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 13, 13, 13, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 3, 4, 5, 4, 7, 0, 0, 0, 0, 0,
            3, 4, 5, 3, 4, 7, 0, 0, 18, 19, 19, 20, 21, 20, 23, 0, 0, 1, 2, 0,
            19, 20, 21, 19, 20, 23, 0, 0, 34, 3221225507, 130, 131, 132, 2147483783, 39, 40, 0, 17, 18, 22,
            130, 131, 132, 131, 2147483783, 39, 40, 49, 50, 161, 163, 164, 163, 150, 55, 56, 0, 33, 34, 133],
            //livello 2
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 73, 74, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 89, 90, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 73, 74, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 89, 90, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
            ],
    20, 
    10);

let sezione3 = new Sezione([
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 45, 46, 45, 46, 45, 46, 45, 46, 45, 46, 45, 46, 45, 46, 0, 0, 0],
            [164, 163, 166, 71, 72, 0, 0, 0, 0, 0, 0, 0, 29, 0, 0, 0, 0, 0, 0, 33, 34, 161,
            180, 179, 182, 87, 88, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 49, 50, 177,
            195, 196, 43, 59, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 65, 66, 193,
            99, 100, 9, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 58, 99,
            115, 116, 0, 0, 0, 0, 0, 0, 13, 4, 13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 115,
            0, 0, 0, 0, 0, 0, 13, 104, 105, 20, 1073741833, 0, 0, 0, 13, 2147483652, 13, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 13, 104, 105, 26, 83, 36, 44, 0, 0, 0, 3221225481, 2147483668, 106, 107, 13, 0, 0, 0,
            3, 4, 0, 104, 105, 26, 83, 122, 123, 0, 0, 0, 0, 0, 2147483692, 2147483684, 38, 27, 106, 107, 13, 4,
            19, 20, 22, 26, 83, 1073741851, 44, 0, 0, 0, 0, 0, 0, 0, 0, 0, 58, 38, 27, 27, 22, 20,
            130, 131, 132, 133, 134, 59, 60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2147483692, 3221225499, 3221225499, 135, 131],
            ],
    22, 
    10);

export const array_sezioni = [sezione1, sezione2, sezione3];

export function sezioneRandom(){
    let mappa_selezionata = array_sezioni[Math.floor(Math.random() * array_sezioni.length)]; //mappa selezionata randomicamente da caricare
    let fg_tilemap = structuredClone(mappa_selezionata.fg_tilemap);  //altrimenti questo viene preso in riferimento e le gemme non vengono ricaricate
    let map_col = mappa_selezionata.map_col;
    let map_row = mappa_selezionata.map_row;

    let nuova_sezione = new Sezione(fg_tilemap, map_col, map_row);

    return nuova_sezione;
}

export let buffer_sezioni = [];

export let col_offset_global = 0;

export function caricaSezione(){
    buffer_sezioni.push(sezioneRandom());
}

export function rimuoviSezione(){
    col_offset_global += buffer_sezioni[0].map_col;
    buffer_sezioni.shift();
}
//SOGGETTO A MODIFICHE, implementare una soluzione che prenda direttamente dai file del tipo map_x.js i dati necessari per costruire le mappe